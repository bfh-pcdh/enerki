(()=>{var e,n={311:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27none%27 stroke=%27%23212529%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpath d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e"},644:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0%27/%3e%3c/svg%3e"},1368:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23fff%27%3e%3cpath d=%27M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708%27/%3e%3c/svg%3e"},1451:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27none%27 stroke=%27%23052c65%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27%3e%3cpath d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e"},1860:(e,n,t)=>{var s=t(8213);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("2e4cac95",s,!1,{})},2247:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%2833, 37, 41, 0.75%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},3317:(e,n,t)=>{var s=t(6010);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("686bfef6",s,!1,{})},3385:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%272%27 fill=%27%23fff%27/%3e%3c/svg%3e"},3534:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\nul[data-v-5fa2f7ae] {\n    list-style-type: none;\n    display: flex;\n    flex-direction: row;\n    position: absolute;\n    bottom: 2.9em;\n    padding: 0.5em;\n    background-color: aliceblue;\n    backdrop-filter: blur(3px);\n    -webkit-backdrop-filter: blur(3px);\n    background-color: rgba(255, 255, 255, 0.1);\n}\nli[data-v-5fa2f7ae] {\n    display: inline-block;\n    cursor: pointer;\n    background-color: #eff1f3;\n    border-radius: 0.2rem;\n    padding: 0.4rem;\n    font-size: 0.5em;\n    width: 30%;\n    margin: 0 1em;\n    color: #4b647d;\n}\nli[data-v-5fa2f7ae]:hover {\n    background-color: #e0e4e8;\n}\n.prompt-number[data-v-5fa2f7ae] {\n    font-size: 2em;\n    color: #c1c9d1;\n    display: block;\n    position: relative;\n    top: -1rem;\n    right: 1rem;\n    height: 1.5rem;\n    width: 1.5rem;\n    text-align: center;\n    border-radius: 50%;\n    background-color: #e0e4e8;\n}\np[data-v-5fa2f7ae] {\n    margin-bottom: 0;\n    margin-top: -1.5rem;\n    position: relative;\n    font-size: 1.7em;\n    z-index: 10;\n}\n\n","",{version:3,sources:["webpack://./src/components/PromptExamples.vue"],names:[],mappings:";AAyCE;IACE,qBAAqB;IACrB,aAAa;IACb,mBAAmB;IACnB,kBAAkB;IAClB,aAAa;IACb,cAAc;IACd,2BAA2B;IAC3B,0BAA0B;IAC1B,kCAAkC;IAClC,0CAA0C;AAC5C;AACA;IACE,qBAAqB;IACrB,eAAe;IACf,yBAAyB;IACzB,qBAAqB;IACrB,eAAe;IACf,gBAAgB;IAChB,UAAU;IACV,aAAa;IACb,cAAc;AAChB;AACA;IACE,yBAAyB;AAC3B;AACA;IACE,cAAc;IACd,cAAc;IACd,cAAc;IACd,kBAAkB;IAClB,UAAU;IACV,WAAW;IACX,cAAc;IACd,aAAa;IACb,kBAAkB;IAClB,kBAAkB;IAClB,yBAAyB;AAC3B;AACA;IACE,gBAAgB;IAChB,mBAAmB;IACnB,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;AACb",sourcesContent:["<script setup lang=\"ts\">\n  import { store } from '@/store';\n\n  const props = defineProps({\n    userInputting: Boolean\n  });\n\n  const emit = defineEmits(['onSelectPrompt']);\n\n  document.addEventListener('keydown', function(event) {\n    const key = Number(event.key);\n    if (!props.userInputting && event.key != ' ' && !isNaN(key) && key <= store.examplePrompts.length) {\n      selectPrompt(key - 1);\n    }\n  }); \n\n\n  function selectPrompt(index: number) {\n    const prompt = store.examplePrompts[index];\n   \n    window.setTimeout(() => \n      emit('onSelectPrompt', prompt),\n      50\n    );\n  }\n<\/script>\n\n<template>\n  <ul>\n    <li v-for=\"prompt, i of store.examplePrompts\" @click=\"selectPrompt(i)\">\n      <span class=\"prompt-number\">\n        {{ i + 1 }}\n      </span>\n      <p>\n        {{ prompt }}\n      </p>\n    </li>\n  </ul>\n</template>\n\n<style scoped>\n  ul {\n    list-style-type: none;\n    display: flex;\n    flex-direction: row;\n    position: absolute;\n    bottom: 2.9em;\n    padding: 0.5em;\n    background-color: aliceblue;\n    backdrop-filter: blur(3px);\n    -webkit-backdrop-filter: blur(3px);\n    background-color: rgba(255, 255, 255, 0.1);\n  }\n  li {\n    display: inline-block;\n    cursor: pointer;\n    background-color: #eff1f3;\n    border-radius: 0.2rem;\n    padding: 0.4rem;\n    font-size: 0.5em;\n    width: 30%;\n    margin: 0 1em;\n    color: #4b647d;\n  }\n  li:hover {\n    background-color: #e0e4e8;\n  }\n  .prompt-number {\n    font-size: 2em;\n    color: #c1c9d1;\n    display: block;\n    position: relative;\n    top: -1rem;\n    right: 1rem;\n    height: 1.5rem;\n    width: 1.5rem;\n    text-align: center;\n    border-radius: 50%;\n    background-color: #e0e4e8;\n  }\n  p {\n    margin-bottom: 0;\n    margin-top: -1.5rem;\n    position: relative;\n    font-size: 1.7em;\n    z-index: 10;\n  }\n\n</style>\n"],sourceRoot:""}]);const a=i},3756:(e,n,t)=>{var s=t(9843);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("e90ff6f8",s,!1,{})},4274:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27M6 10h8%27/%3e%3c/svg%3e"},4568:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\n.background[data-v-46c3d32b] {\n  backdrop-filter: blur(3px);\n  -webkit-backdrop-filter: blur(3px);\n  background-color: rgba(255, 255, 255, .5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 15 !important;\n}\n.connect-button[data-v-46c3d32b] {\n  width: 10em;\n  display: block;\n  margin-top: 2em;\n  margin-left: auto;\n  margin-right: auto;\n}\n.modal[data-v-46c3d32b] {\n  display: contents;\n}\n.modal-content[data-v-46c3d32b] {\n  top: 10vh;\n}\n.modal-dialog[data-v-46c3d32b] {\n  z-index: 20 !important;\n}\n.button-container[data-v-46c3d32b] {\n  display: flex;\n}\nh1[data-v-46c3d32b] {\n  font-size: 1.2em;\n}\n","",{version:3,sources:["webpack://./src/components/ConnectModal.vue"],names:[],mappings:";AAsDA;EACE,0BAA0B;EAC1B,kCAAkC;EAClC,yCAAyC;EACzC,eAAe;EACf,MAAM;EACN,OAAO;EACP,aAAa;EACb,WAAW;EACX,sBAAsB;AACxB;AACA;EACE,WAAW;EACX,cAAc;EACd,eAAe;EACf,iBAAiB;EACjB,kBAAkB;AACpB;AACA;EACE,iBAAiB;AACnB;AACA;EACE,SAAS;AACX;AACA;EACE,sBAAsB;AACxB;AACA;EACE,aAAa;AACf;AACA;EACE,gBAAgB;AAClB",sourcesContent:['<script setup lang="ts">\nimport { store } from \'../store\';\nimport { i18n } from \'@/assets/i18n\';\n\nconst emit = defineEmits([\'onError\']);\n\nfunction connect(type: \'heartRate\' | \'power\' | \'debug\') {\n  try {\n    store.connect(type);\n  } catch (e) {\n    emit(\'onError\', JSON.stringify(e, null, 2));\n  }\n}\n<\/script>\n\n<template>\n  <div class="background" />\n  <div class="modal fade" id="connect-modal">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">{{ i18n(\'CONNECT_TITLE\') }}</h1>\n        </div>\n        <div class="modal-body">\n          <p>{{ i18n(\'CONNECT_NOTCONNECTED\') }}</p>\n          <p><a href="https://github.com/bfh-pcdh/enerki/blob/main/SETUP.md" target="_blank">{{ i18n(\'CONNECT_INSTRUCTIONS\') }}</a></p>\n          <div class="button-container">\n            \x3c!-- button \n              @click="connect(\'heartRate\')"\n              :disabled="!store.heartRate.stickAvailable()"\n              class="connect-button">\n              Pulssensor verbinden\n            </button--\x3e\n            <button \n              @click="connect(\'power\')"\n              class="connect-button"\n              :disabled="!store.power.stickAvailable()"\n              :title="i18n(\'CONNECT_POWERMETER_TOOLTIP\')">\n              {{ i18n(\'CONNECT_POWERMETER\') }}\n            </button>\n            <button \n              @click="connect(\'debug\')"\n              class="connect-button"\n              :title="i18n(\'CONNECT_DEBUG_TOOLTIP\')">\n              {{ i18n(\'CONNECT_DEBUG\') }}\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.background {\n  backdrop-filter: blur(3px);\n  -webkit-backdrop-filter: blur(3px);\n  background-color: rgba(255, 255, 255, .5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 15 !important;\n}\n.connect-button {\n  width: 10em;\n  display: block;\n  margin-top: 2em;\n  margin-left: auto;\n  margin-right: auto;\n}\n.modal {\n  display: contents;\n}\n.modal-content {\n  top: 10vh;\n}\n.modal-dialog {\n  z-index: 20 !important;\n}\n.button-container {\n  display: flex;\n}\nh1 {\n  font-size: 1.2em;\n}\n</style>\n'],sourceRoot:""}]);const a=i},4718:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%23fff%27/%3e%3c/svg%3e"},4914:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%236ea8fe%27%3e%3cpath fill-rule=%27evenodd%27 d=%27M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708%27/%3e%3c/svg%3e"},5172:(e,n,t)=>{var s=t(7067);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("0a7edc10",s,!1,{})},5372:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 12 12%27 width=%2712%27 height=%2712%27 fill=%27none%27 stroke=%27%23dc3545%27%3e%3ccircle cx=%276%27 cy=%276%27 r=%274.5%27/%3e%3cpath stroke-linejoin=%27round%27 d=%27M5.8 3.6h.4L6 6.5z%27/%3e%3ccircle cx=%276%27 cy=%278.2%27 r=%27.6%27 fill=%27%23dc3545%27 stroke=%27none%27/%3e%3c/svg%3e"},5419:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 20 20%27%3e%3cpath fill=%27none%27 stroke=%27%23fff%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%273%27 d=%27m6 10 3 3 6-6%27/%3e%3c/svg%3e"},5521:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\nform[data-v-a149adc6] {\n    display: flex;\n    margin: 5em 1em !important;\n    flex-direction: column;\n}\ndiv[data-v-a149adc6] {\n    display: flex;\n    width: 100%;\n    margin-top: 1em;\n}\n.token-box input[data-v-a149adc6] {\n    width: 80%;\n}\n.persist-box[data-v-a149adc6] {\n    width: 50%;\n    margin-left: auto;\n    margin-right: auto;\n}\n.persist-box input[data-v-a149adc6] {\n    margin-right: 0.5em;\n}\nbutton[data-v-a149adc6] {\n    width: 20%;\n}\n","",{version:3,sources:["webpack://./src/components/AuthForm.vue"],names:[],mappings:";AAmDE;IACE,aAAa;IACb,0BAA0B;IAC1B,sBAAsB;AACxB;AACA;IACE,aAAa;IACb,WAAW;IACX,eAAe;AACjB;AACA;IACE,UAAU;AACZ;AACA;IACE,UAAU;IACV,iBAAiB;IACjB,kBAAkB;AACpB;AACA;IACE,mBAAmB;AACrB;AACA;IACE,UAAU;AACZ",sourcesContent:['<script setup lang="ts">\nimport { i18n } from \'@/assets/i18n\';\nimport { ref } from \'vue\';\n\n  const emit = defineEmits([\'onToken\', \'onError\']);\n\n  const token = ref(\'\');\n  const persist = ref(false);\n\n  // TODO: very basic validation, update this later\n  function isValid(token: string): Promise<boolean> {\n    return Promise.resolve(token.length > 0);\n  }\n\n  function setToken() {\n    isValid(token.value).then((valid) => {\n      if (valid) {\n        emit(\'onToken\', {\n          token: token.value,\n          persist: persist.value\n        });\n      } \n    });\n  }\n  function togglePersist() {\n    if (persist.value) {\n      persist.value = false;\n    } else {\n      const confirm = window.confirm(\n          i18n(\'AUTH_CONFIRM\')\n      );\n      window.setTimeout(() => persist.value = confirm, 1); // hack necessary to set negative answer when user checked checkbox and said no in prompt\n    }\n  }\n<\/script>\n\n<template>\n  <form action="#">\n    <div class="token-box">\n      <input type="text" v-model="token" placeholder="Bitte gib dein BeeChat Token ein" style="width: 100%"></input>\n      <button @click="setToken" type="submit" :disabled="token.length == 0">\n        {{ i18n(\'SAVE\').toUpperCase() }}\n      </button>\n    </div>\n    <div class="persist-box">\n      <input type="checkbox" v-model="persist" @click="togglePersist">{{ i18n(\'AUTH_PERSIST\') }}</input>\n    </div>\n  </form>\n</template>\n\n<style scoped>\n  form {\n    display: flex;\n    margin: 5em 1em !important;\n    flex-direction: column;\n  }\n  div {\n    display: flex;\n    width: 100%;\n    margin-top: 1em;\n  }\n  .token-box input {\n    width: 80%;\n  }\n  .persist-box {\n    width: 50%;\n    margin-left: auto;\n    margin-right: auto;\n  }\n  .persist-box input {\n    margin-right: 0.5em;\n  }\n  button {\n    width: 20%;\n  }\n</style>\n'],sourceRoot:""}]);const a=i},5531:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23343a40%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e"},5782:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27%2386b7fe%27/%3e%3c/svg%3e"},5967:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27 fill=%27%23000%27%3e%3cpath d=%27M.293.293a1 1 0 0 1 1.414 0L8 6.586 14.293.293a1 1 0 1 1 1.414 1.414L9.414 8l6.293 6.293a1 1 0 0 1-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L6.586 8 .293 1.707a1 1 0 0 1 0-1.414%27/%3e%3c/svg%3e"},6010:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\nul.chat-list[data-v-82039752] {\n  overflow: scroll;\n  height: 100vh;\n  margin-bottom: 0;\n  padding: 1em;\n  padding-top: 10em;\n}\nli[data-v-82039752]:first-child {\n  margin-top: 3em;\n}\n.message-bubble[data-v-82039752] {\n  list-style: none;\n  padding: 0.25em 1em;\n  border-radius: 1em;\n  width: 75%;\n  margin-top: 0.5em;\n  transition: opacity 1.2s ease, filter 1.2s ease;\n}\n.chat-user[data-v-82039752] {\n  background-color: #64788b;\n  color: #eff1f3;\n  margin-left: 25%;\n}\n.chat-assistant[data-v-82039752] {\n  background-color: #e0e4e8;\n  color: #4b647d;\n  margin-right: 25%;\n}\n.chat-developer[data-v-82039752] {\n  display: none;\n}\n.spinner-border[data-v-82039752] {\n  display: block;\n  height: 1em;\n  width: 1em;\n  margin-left: auto;\n  margin-right: auto;\n}\ninput[data-v-82039752] {\n  border-bottom-left-radius: 1em;\n  border-top-left-radius: 1em;\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n  padding-left: 0.5em;\n  width: 75%;\n}\nbutton[data-v-82039752] {\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n  border-bottom-right-radius: 1em;\n  border-top-right-radius: 1em;\n  padding-right: 0.5em;\n  width: 25%;\n}\n.usage[data-v-82039752] {\n  width: 100%;\n  margin-top: 1em;\n  display: block;\n  text-align: center;\n  color: darkgray;\n}\n.spinner-border[data-v-82039752] {\n  margin-top: 2em;\n  margin-bottom: 2em;\n}\n.scroll-target[data-v-82039752] {\n  height: 4em;\n  color: white;\n}\n","",{version:3,sources:["webpack://./src/components/Chat.vue"],names:[],mappings:";AAmNA;EACE,gBAAgB;EAChB,aAAa;EACb,gBAAgB;EAChB,YAAY;EACZ,iBAAiB;AACnB;AACA;EACE,eAAe;AACjB;AACA;EACE,gBAAgB;EAChB,mBAAmB;EACnB,kBAAkB;EAClB,UAAU;EACV,iBAAiB;EACjB,+CAA+C;AACjD;AACA;EACE,yBAAyB;EACzB,cAAc;EACd,gBAAgB;AAClB;AACA;EACE,yBAAyB;EACzB,cAAc;EACd,iBAAiB;AACnB;AACA;EACE,aAAa;AACf;AACA;EACE,cAAc;EACd,WAAW;EACX,UAAU;EACV,iBAAiB;EACjB,kBAAkB;AACpB;AAEA;EACE,8BAA8B;EAC9B,2BAA2B;EAC3B,6BAA6B;EAC7B,0BAA0B;EAC1B,mBAAmB;EACnB,UAAU;AACZ;AAEA;EACE,4BAA4B;EAC5B,yBAAyB;EACzB,+BAA+B;EAC/B,4BAA4B;EAC5B,oBAAoB;EACpB,UAAU;AACZ;AAEA;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,kBAAkB;EAClB,eAAe;AACjB;AAEA;EACE,eAAe;EACf,kBAAkB;AACpB;AACA;EACE,WAAW;EACX,YAAY;AACd",sourcesContent:["<script setup lang=\"ts\">\nimport { computed, ref, ShallowRef, useTemplateRef } from 'vue';\nimport { ENV } from '../../env';\nimport { type Message, USER_ROLE } from '@/models';\nimport axios from 'axios';\nimport markdownit from 'markdown-it';\nimport { store } from '../store';\nimport { AntSubscription } from '@/antService';\nimport ToastService from '@/toastService';\nimport PromptExamples from './PromptExamples.vue';\nimport { i18n } from '@/assets/i18n';\n\n// define props\nconst props = defineProps<{\n  token: string,\n  percent: number\n}>();\n\nconst md = markdownit({\n  html: true,\n  linkify: true,\n  typographer: true\n});\n\n// define events\nconst emit = defineEmits(['onAnswer','onError']);\n\nconst chat: ShallowRef = useTemplateRef('chat-list');\n\nconst loadingPercent = ref(0);\n\nconst userInput = ref(false);\nconst chatInput = ref(null);\nlet usage = -1;\nlet inputTimeout = -1;\n\nconst loadingStyle = computed(() => {\n  return 'filter: blur(' + (10 - Math.round(loadingPercent.value / 10)) + 'px);opacity:' + (0.009 * loadingPercent.value + 0.1).toFixed(2)  + ';';\n})\n\n/**\n * Estimates the energy usage for an answer, based on the number of output tokens. Samsi et al. estimated the energy usage with 3 - 4 Joule per token, which equals to ~0.001 Wh\n * @see Paper       Samsi et al. (2023): From Words to Watts: Benchmarking the Energy Costs of Large Language Model Inference. https://doi.org/10.48550/arXiv.2310.03003\n * @param tokens    number of output tokens of the answer\n * @returns         an estimation of energy (in Wh), based on the number of output tokens\n */\nfunction estimateEnergyUsage(tokens: number) {\n  return tokens * 3.5 / 3600; // 3.5 joules per token; 3600 J = 1 Wh\n}\n\n/**\n * Estimates the energy usage before knowing the answer\n * @returns         an estimation of energy (in Wh)\n */\nfunction preEstimateUsage() {\n  return 1;\n}\n\n/**\n * Checks if a message is currently the last\n * @param index   the index of the message\n * @returns       TRUE if the message is the last in the array\n *                FALSE if there are more messages after it in the array\n */\nfunction isLastMessage(index: number): boolean {\n  return store.chatMessages.length - index === 1;\n}\n\n/**\n * Sends a message to the model, with all previous messages as context\n */\nfunction send() {\n  if (store.textInput == '') return;\n\n  const message: Message = {\n    role: USER_ROLE.USER,\n    content: store.textInput,\n    loading: false\n  };\n  loadingPercent.value = 0;\n\n  store.chatMessages.push(message);\n\n  const body = {\n    model: ENV.MODEL,\n    messages: [...store.chatMessages]\n  }\n  store.textInput = '';\n\n  const answerMessage = {\n    role: USER_ROLE.AI,\n    content: '...',\n    loading: true,\n    percent: 0\n  };\n\n  ToastService.startToast();\n\n  store.chatMessages.push(answerMessage);\n  usage = -1;\n\n  chat.value.lastElementChild?.scrollIntoView({ behavior: 'smooth', block: 'end' });\n\n  store.startAndSubscribe(\n    preEstimateUsage(),\n    (ant: AntSubscription) => {\n      answerMessage.percent = Math.min(ant.percent, 100);\n      loadingPercent.value = Math.min(ant.percent, 100);\n\n      ToastService.progressToast(\n        answerMessage.percent,\n        answerMessage.content !== '...',\n        ant.value\n      );\n      if (ant.percent >= 100 && usage > 0) {\n        ToastService.energyToast(usage);\n      }\n    }\n  );\n\n  const time = Date.now();\n  axios.post(\n    ENV.BASE_URL + ENV.ENDPOINT,\n    body,\n    {\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + props.token\n      },\n    }\n  ).then((result) => {\n    const duration = Math.round((Date.now() - time) / 1000);\n    usage = estimateEnergyUsage(result.data.usage.completion_tokens);\n    store.setTarget(usage);\n\n    console.log('Energie verbraucht: ' + usage.toFixed(2) + ' Wh in ' + duration + ' Sekunden. \\nDas ben√∂tigt eine Durchschnittsleistung von ' + Math.round(3600 * usage / duration) + ' Watt.');\n\n    answerMessage.content = (result.data.choices[0].message.content as string).replaceAll('√ü', 'ss');\n    answerMessage.loading = false;\n\n    // we need to do this, or vue won't detect the update...\n    store.chatMessages = [...store.chatMessages]\n\n    chat.value.lastElementChild?.scrollIntoView({ behavior: 'smooth', block: 'end' });\n    emit('onAnswer', answerMessage);\n  }).catch((e) => {\n    console.error(e);\n    emit('onError', JSON.stringify(e, null, 2));\n  });\n}\n\n/**\n * Sets a 1 second timeout in which we don't listen to hotkey inputs\n */\nfunction inputting() {\n  userInput.value = true;\n  if (inputTimeout > 0) {\n    window.clearTimeout(inputTimeout);\n  }\n  inputTimeout = window.setTimeout(() => {\n    userInput.value = false;\n  }, 1000);\n}\n\nfunction setPrompt(prompt: string) {\n  if (!store.chatMessages[store.chatMessages.length -1]?.loading) {\n    store.textInput = prompt;\n    (chatInput.value as any)?.focus();\n  }\n}\n<\/script>\n\n<template>\n  <ul ref=\"chat-list\" class=\"chat-list\">\n    <li\n      v-for=\"(message, i) of store.chatMessages\"\n      :class=\"'message-bubble chat-' + message.role\"\n      :style=\"\n        message.percent != undefined && message.percent < 100 && isLastMessage(i)\n          ? loadingStyle\n          : ''\n      \"\n    >\n      <div v-if=\"message.loading\" class=\"spinner-border\" role=\"status\">\n        <span class=\"visually-hidden\">Loading...</span>\n      </div>\n      <div v-else v-html=\"md.render(message.content)\" />\n    </li>\n    <li style=\"height: 10em; color: white\"></li>\n  </ul>\n\n  <PromptExamples\n    @on-select-prompt=\"setPrompt\"\n    :user-inputting=\"userInput\"\n    v-if=\"!store.isPedalling() && store.examplePrompts.length > 0\"\n  />\n\n  <form action=\"#\" ref=\"input-form\">\n    <input\n      autofocus\n      type=\"text\"\n      v-model=\"store.textInput\"\n      :placeholder=\"i18n(store.examplePrompts.length > 0 ? 'CHAT_PLACEHOLDER_PROMPTS' : 'CHAT_PLACEHOLDER')\"\n      @input=\"inputting\"\n      ref=\"chatInput\"\n    />\n    <button @click=\"send\" type=\"submit\" :disabled=\"store.isPedalling()\">{{ i18n('SEND').toUpperCase() }}</button>\n  </form>\n</template>\n\n<style scoped>\nul.chat-list {\n  overflow: scroll;\n  height: 100vh;\n  margin-bottom: 0;\n  padding: 1em;\n  padding-top: 10em;\n}\nli:first-child {\n  margin-top: 3em;\n}\n.message-bubble {\n  list-style: none;\n  padding: 0.25em 1em;\n  border-radius: 1em;\n  width: 75%;\n  margin-top: 0.5em;\n  transition: opacity 1.2s ease, filter 1.2s ease;\n}\n.chat-user {\n  background-color: #64788b;\n  color: #eff1f3;\n  margin-left: 25%;\n}\n.chat-assistant {\n  background-color: #e0e4e8;\n  color: #4b647d;\n  margin-right: 25%;\n}\n.chat-developer {\n  display: none;\n}\n.spinner-border {\n  display: block;\n  height: 1em;\n  width: 1em;\n  margin-left: auto;\n  margin-right: auto;\n}\n\ninput {\n  border-bottom-left-radius: 1em;\n  border-top-left-radius: 1em;\n  border-bottom-right-radius: 0;\n  border-top-right-radius: 0;\n  padding-left: 0.5em;\n  width: 75%;\n}\n\nbutton {\n  border-bottom-left-radius: 0;\n  border-top-left-radius: 0;\n  border-bottom-right-radius: 1em;\n  border-top-right-radius: 1em;\n  padding-right: 0.5em;\n  width: 25%;\n}\n\n.usage {\n  width: 100%;\n  margin-top: 1em;\n  display: block;\n  text-align: center;\n  color: darkgray;\n}\n\n.spinner-border {\n  margin-top: 2em;\n  margin-bottom: 2em;\n}\n.scroll-target {\n  height: 4em;\n  color: white;\n}\n</style>\n"],sourceRoot:""}]);const a=i},6366:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 30 30%27%3e%3cpath stroke=%27rgba%28255, 255, 255, 0.55%29%27 stroke-linecap=%27round%27 stroke-miterlimit=%2710%27 stroke-width=%272%27 d=%27M4 7h22M4 15h22M4 23h22%27/%3e%3c/svg%3e"},7067:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\nh1[data-v-5fe2c650] {\n    margin-top: 3em;\n    margin-left: 2em;\n}\np[data-v-5fe2c650] {\n    margin-left: 5em;\n}\nbutton[data-v-5fe2c650] {\n    margin-left: 5em;\n}\n","",{version:3,sources:["webpack://./src/components/Settings.vue"],names:[],mappings:";AAwBE;IACE,eAAe;IACf,gBAAgB;AAClB;AACA;IACE,gBAAgB;AAClB;AACA;IACE,gBAAgB;AAClB",sourcesContent:["<script setup lang=\"ts\">\n  import { store } from '../store';\n  const PACKAGE = require('../../package.json');\n  const version = PACKAGE.version;\n  const emit = defineEmits(['onClose']);\n\n  function reset() {\n    if (\n      confirm('Soll enerKI f√ºr eine¬∑n Benutzer¬∑in zur√ºckgesetz werden?')\n    ) {\n      store.resetUser();\n      emit('onClose');\n    }\n\n  }\n<\/script>\n\n<template>\n    <h1>üèóÔ∏è TO DO: Einstellungen üèóÔ∏è</h1>\n    <p>enerKI Version: {{ version }}</p> \n    <button @click=\"reset\">Neue¬∑r Benutzer¬∑in</button>\n</template>\n\n<style scoped>\n  h1 {\n    margin-top: 3em;\n    margin-left: 2em;\n  }\n  p {\n    margin-left: 5em;\n  }\n  button {\n    margin-left: 5em;\n  }\n</style>\n"],sourceRoot:""}]);const a=i},7115:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 16 16%27%3e%3cpath fill=%27none%27 stroke=%27%23dee2e6%27 stroke-linecap=%27round%27 stroke-linejoin=%27round%27 stroke-width=%272%27 d=%27m2 5 6 6 6-6%27/%3e%3c/svg%3e"},7154:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%280, 0, 0, 0.25%29%27/%3e%3c/svg%3e"},7655:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\n.error[data-v-3f22f2c9] {\n  background-color: salmon;\n  color: white;\n  margin: 1em;\n  width: 100%;\n  padding: 0.5em;\n  border-radius: 0.5em;\n}\nheader[data-v-3f22f2c9] {\n  color: #697d91;\n  display:flex;\n  flex-direction: row;\n}\nheader h1[data-v-3f22f2c9] {\n  line-height: 1.6em;\n  margin-left: 1em;\n}\n.error h2[data-v-3f22f2c9] {\n  font-size: 1.5em;\n  font-weight: bold;\n}\n.header-buttons[data-v-3f22f2c9] {\n  width: 6em;\n  margin-left: auto;\n  justify-content: space-evenly;\n  display: flex;\n}\n.header-button[data-v-3f22f2c9] {\n  cursor: pointer;\n  text-decoration: none;\n  color: #c1c9d1;\n  font-size: 2em;\n  line-height: 2em;\n  margin-left: 0.2em;\n}\n.glow[data-v-3f22f2c9] {\n  text-shadow: #fac300 0px 0 3px;\n}\n.header-button[data-v-3f22f2c9]:hover {\n  color: #697d91;\n  filter: saturate(1) !important;\n}\n.logo[data-v-3f22f2c9] {\n  height: 2.5em;\n  margin: 0.75em;\n}\n.toast-list[data-v-3f22f2c9] {\n  list-style-type: none;\n  position: fixed;\n  bottom: 30%;\n  width: 60%;\n  margin-left: 20%;\n}\n","",{version:3,sources:["webpack://./src/App.vue"],names:[],mappings:";AA6LA;EACE,wBAAwB;EACxB,YAAY;EACZ,WAAW;EACX,WAAW;EACX,cAAc;EACd,oBAAoB;AACtB;AACA;EACE,cAAc;EACd,YAAY;EACZ,mBAAmB;AACrB;AAEA;EACE,kBAAkB;EAClB,gBAAgB;AAClB;AAEA;EACE,gBAAgB;EAChB,iBAAiB;AACnB;AACA;EACE,UAAU;EACV,iBAAiB;EACjB,6BAA6B;EAC7B,aAAa;AACf;AACA;EACE,eAAe;EACf,qBAAqB;EACrB,cAAc;EACd,cAAc;EACd,gBAAgB;EAChB,kBAAkB;AACpB;AACA;EACE,8BAA8B;AAChC;AAEA;EACE,cAAc;EACd,8BAA8B;AAChC;AAEA;EACE,aAAa;EACb,cAAc;AAChB;AAEA;EACE,qBAAqB;EACrB,eAAe;EACf,WAAW;EACX,UAAU;EACV,gBAAgB;AAClB",sourcesContent:['<script setup lang="ts">\n  import { ref } from "vue";\n  import { ENV } from "../env";\n  import AuthForm from "./components/AuthForm.vue";\n  import ConnectModal from "./components/ConnectModal.vue";\n  import Settings from "./components/Settings.vue";\n  import Chat from "./components/Chat.vue";\n  import { getPersisted, LANG, persist, store, STORE_KEY } from "./store";\n  import PowerSimulator from \'./components/PowerSimulator.vue\';\n  import QuizCardModal from "./components/QuizCardModal.vue";\n  import QuizService from "./quizService";\n  import { QuizCard } from "./models";\n  import { i18n } from "./assets/i18n";\n\n  const version = require(\'../package.json\').version;\n\n  const token = ref(getPersisted<string>(STORE_KEY.TOKEN) || ENV.TOKEN);\n\n  const error = ref<string | undefined>();\n\n  const percent = ref<number>(0);\n\n  const activeCard = ref<QuizCard | undefined>();\n  const showCardModal = ref(false);\n\n  const showSettings = ref(false);\n\n  document.addEventListener(\'keydown\', function(event) {\n    if (showCardModal.value && event.key == \'Enter\') {\n      showCardModal.value = false;\n    } else if (event.key == \'Enter\' && store.textInput == \'\') {\n      showCard();\n    }\n  });\n\n  /**\n   * Calculates the header buttons\n   */\n  function getHeaderButtons() {\n    return [\n      {\n        icon: \'üÄô\',\n        title: activeCard.value == undefined \n          ? i18n(\'NEW_CARD\')\n          : i18n(\'SHOW_CARD\'),\n        action: showCard,\n        style: activeCard.value == undefined \n          ? \'line-height: 1.8em;\'\n          : \'text-shadow: #fac300 0px 0 3px; line-height: 1.8em;\'\n      },\n      {\n        icon: \'‚ü≤\',\n        title: i18n(\'RESET\'),\n        action: resetUser,\n        style: \'\'\n      },\n      {\n        icon: store.lang === LANG.DE ? \'üá©üá™\' : \'üá´üá∑\',\n        title: i18n(\'LANGUAGE\'),\n        action: toggleLanguage,\n        style: \'filter: saturate(0)\'\n      },\n      // {\n      //   icon: \'‚öôÔ∏é\',\n      //   title: \'Einstellungen\',\n      //   action: () => showSettings.value = !showSettings.value,\n      //   style: \'\'\n      // }\n    ];\n  }\n\n  /**\n   * Sets the token recieved from authentication\n   * @param t    object with the new token and a boolean value\n   *             that defines if the token should be persistet to local storage\n   */\n  function setToken(t: {token: string, persist: boolean}) {\n    token.value = t.token;\n    if (t.persist) {\n      persist(STORE_KEY.TOKEN, token.value);\n    }\n  }\n\n  /**\n   * \n   */\n  function toggleLanguage() {\n    switch (store.lang) {\n      case LANG.DE: \n        store.lang = LANG.FR;\n        break;\n      case LANG.FR:\n        store.lang = LANG.DE;\n        break;\n    }\n  }\n\n  /**\n   * Resets the app to start with a new user\n   */\n  function resetUser() {\n     if (\n      confirm(i18n(\'RESET_USER\'))\n    ) {\n      activeCard.value = undefined;\n      store.resetUser();\n    }\n  }\n\n\n  /**\n   * Resets the whole app\n   */\n  function reset() {\n    resetUser();\n    error.value = undefined;\n    token.value = ENV.TOKEN;\n  }\n\n  /**\n   * Draws a new quiz card and sets the example prompts.\n   */\n  function showCard() {\n    if (activeCard.value == undefined) {\n      activeCard.value = QuizService.drawRandomQuizCard();\n      store.examplePrompts = activeCard.value.prompts[store.lang];\n    }\n    showCardModal.value = true;\n  }\n\n  /**\n   * Handles an error and displays it to the user\n   * @param error   the error message to display to the user\n   */\n  function handleError(e: string = "Unbekannter Fehler.") {\n    error.value = e;\n  }\n<\/script>\n\n<template>\n  <header>\n    <img :src="require(\'@/assets/logo.png\')" alt="Logo Berner Fachhochschule" class="logo" :title="\'EnerKI Version: \' +version + \'\\nModel: \' + ENV.BASE_URL + \' > \' + ENV.MODEL" />\n    <h1>enerKI</h1>\n    <div class="header-buttons">\n      <a v-for="b of getHeaderButtons()" @click="b.action" :title="b.title" class="header-button" :style="b.style">{{ b.icon }}</a>\n    </div>\n  </header>\n  <Settings v-if="showSettings" @on-close="showSettings = false"/>\n  <div v-else>\n    \x3c!-- if no token is set, we show the auth form --\x3e\n    <auth-form v-if="token?.length == 0" @on-token="setToken" @on-error="handleError" />\n\n    <main v-else>\n      \x3c!-- display error message --\x3e\n      <div class="error" v-if="error">\n        <h2>{{i18n(\'ERROR\')}}</h2>\n        {{ error }}\n        <button @click="reset">{{i18n(\'ERROR\')}}</button>\n      </div>\n\n      \x3c!-- chat window --\x3e\n      <chat v-else \n        :token="token" \n        :percent="percent"\n        @on-error="handleError" \n      />  \n\n      \x3c!-- window for power simulation / debug --\x3e\n      <PowerSimulator v-if="store.connected && store.isPedalling()" :debug="store.isDebug" :watt="Math.round(store.power.getValues().value)"/>\n    </main>\n\n    <ConnectModal v-if="!store.connected" @on-error="handleError" />\n    <QuizCardModal v-if="activeCard && showCardModal" :card="activeCard" @on-close="showCardModal = false"/>\n\n    <ul class="toast-list">\n      <li\n        v-for="(toast, i) of store.toasts"\n        :style="\'opacity: \' + (i + 1) / store.toasts.length"\n      >\n        <div class="alert alert-info" role="alert">\n          {{ toast }}\n        </div>\n      </li>\n    </ul>\n  </div>\n \n</template>\n\n<style scoped>\n.error {\n  background-color: salmon;\n  color: white;\n  margin: 1em;\n  width: 100%;\n  padding: 0.5em;\n  border-radius: 0.5em;\n}\nheader {\n  color: #697d91;\n  display:flex;\n  flex-direction: row;\n}\n\nheader h1 {\n  line-height: 1.6em;\n  margin-left: 1em;\n}\n\n.error h2 {\n  font-size: 1.5em;\n  font-weight: bold;\n}\n.header-buttons {\n  width: 6em;\n  margin-left: auto;\n  justify-content: space-evenly;\n  display: flex;\n}\n.header-button {\n  cursor: pointer;\n  text-decoration: none;\n  color: #c1c9d1;\n  font-size: 2em;\n  line-height: 2em;\n  margin-left: 0.2em;\n}\n.glow {\n  text-shadow: #fac300 0px 0 3px;\n}\n\n.header-button:hover {\n  color: #697d91;\n  filter: saturate(1) !important; \n}\n\n.logo {\n  height: 2.5em;\n  margin: 0.75em;\n}\n\n.toast-list {\n  list-style-type: none;\n  position: fixed;\n  bottom: 30%;\n  width: 60%;\n  margin-left: 20%;\n}\n</style>\n'],sourceRoot:""}]);const a=i},7853:(e,n,t)=>{var s=t(3534);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("55b5cdc1",s,!1,{})},7968:(e,n,t)=>{"use strict";e.exports=t.p+"assets/images/logo.5d5014ba3e4201b16ddb.png"},8213:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\n.background[data-v-205e369a] {\n  backdrop-filter: blur(3px);\n  -webkit-backdrop-filter: blur(3px);\n  background-color: rgba(255, 255, 255, .5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 15 !important;\n}\n.modal[data-v-205e369a] {\n  display: contents;\n  border-color: #4b647d;\n}\np[data-v-205e369a] {\n  color: #4b647d;\n}\np.additional[data-v-205e369a] {\n  font-size: 0.8em;\n  margin-bottom: 0;\n}\np.question[data-v-205e369a] {\n  margin: 1em;\n}\n.modal-content[data-v-205e369a] {\n  top: 10vh;\n}\n.modal-header[data-v-205e369a] {\n  background-color: #fac300;\n  color: #4b647d;\n}\n.modal-dialog[data-v-205e369a] {\n  z-index: 20 !important;\n}\nh1[data-v-205e369a] {\n  font-size: 1.2em;\n}\n.close-button[data-v-205e369a] {\n  cursor: pointer;\n  text-decoration: none;\n  width: 1em;\n  margin-left: auto;\n}\n.close-button[data-v-205e369a]:hover {\n  opacity: 0.8;\n}\n","",{version:3,sources:["webpack://./src/components/QuizCardModal.vue"],names:[],mappings:";AA+BA;EACE,0BAA0B;EAC1B,kCAAkC;EAClC,yCAAyC;EACzC,eAAe;EACf,MAAM;EACN,OAAO;EACP,aAAa;EACb,WAAW;EACX,sBAAsB;AACxB;AACA;EACE,iBAAiB;EACjB,qBAAqB;AACvB;AACA;EACE,cAAc;AAChB;AACA;EACE,gBAAgB;EAChB,gBAAgB;AAClB;AACA;EACE,WAAW;AACb;AACA;EACE,SAAS;AACX;AACA;EACE,yBAAyB;EACzB,cAAc;AAChB;AACA;EACE,sBAAsB;AACxB;AACA;EACE,gBAAgB;AAClB;AACA;EACE,eAAe;EACf,qBAAqB;EACrB,UAAU;EACV,iBAAiB;AACnB;AACA;EACE,YAAY;AACd",sourcesContent:['<script setup lang="ts">\nimport { QuizCard } from "@/models";\nimport { i18n } from "@/assets/i18n";\nimport { store } from "@/store";\n\nconst emit = defineEmits(["onClose"]);\nconst props = defineProps<{\n  card: QuizCard\n}>(); \n<\/script>\n\n<template>\n  <div class="background" />\n  <div class="modal fade" id="quizcard-modal">\n    <div class="modal-dialog">\n      <div class="modal-content">\n        <div class="modal-header">\n          <h1 class="modal-title">{{i18n(\'QUIZCARD_TITLE\') + card.id}}</h1>\n          <span class="close-button" @click="emit(\'onClose\')">√ó</span>\n        </div>\n        <div class="modal-body">\n          <p class="additional">{{i18n(\'QUIZCARD_DESCRIPTION\')}}</p>\n          <p class="question">{{ card.question[store.lang] }}</p>\n          <p class="additional">{{i18n(\'QUIZCARD_INSTRUCTION\')}}</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style scoped>\n.background {\n  backdrop-filter: blur(3px);\n  -webkit-backdrop-filter: blur(3px);\n  background-color: rgba(255, 255, 255, .5);\n  position: fixed;\n  top: 0;\n  left: 0;\n  height: 100vh;\n  width: 100%;\n  z-index: 15 !important;\n}\n.modal {\n  display: contents;\n  border-color: #4b647d;\n}\np {\n  color: #4b647d;\n}\np.additional {\n  font-size: 0.8em;\n  margin-bottom: 0;\n}\np.question {\n  margin: 1em;\n}\n.modal-content {\n  top: 10vh;\n}\n.modal-header {\n  background-color: #fac300;\n  color: #4b647d;\n}\n.modal-dialog {\n  z-index: 20 !important;\n}\nh1 {\n  font-size: 1.2em;\n}\n.close-button {\n  cursor: pointer;\n  text-decoration: none;\n  width: 1em;\n  margin-left: auto;\n}\n.close-button:hover {\n  opacity: 0.8;\n}\n</style>\n'],sourceRoot:""}]);const a=i},8330:e=>{"use strict";e.exports=JSON.parse('{"name":"enerki","version":"0.7.0","private":true,"license":"MIT","scripts":{"dev":"webpack serve --config webpack.config.js","build":"webpack --config webpack.config.js","lint":"eslint ./src --ext .js,.vue","ignore-env":"git update-index --assume-unchanged env.ts","lint:fix":"eslint ./src --ext .js,.vue --fix","format":"prettier \'src/**/*.{js,vue,css,md,json}\' --write"},"dependencies":{"ant-plus-next":"^0.3.2","axios":"^1.11.0","bootstrap":"^5.3.7","file-loader":"^6.2.0","markdown-it":"^14.1.0","vue":"^3.4.26"},"devDependencies":{"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@eslint/js":"^9.1.1","@types/markdown-it":"^14.1.2","@types/node":"^24.1.0","@vue/compiler-sfc":"^3.5.18","babel-loader":"^10.0.0","css-loader":"^7.1.2","eslint":"^9.0.0","eslint-config-prettier":"^10.0.0","eslint-plugin-prettier":"^5.1.3","eslint-plugin-vue":"^10.0.0","globals":"^16.0.0","html-webpack-plugin":"^5.6.0","prettier":"^3.2.5","ts-loader":"^9.5.2","typescript":"^5.8.3","vue-loader":"^17.4.2","vue-style-loader":"^4.1.3","vue-tsc":"^3.0.3","webpack":"^5.91.0","webpack-bundle-analyzer":"^4.10.2","webpack-cli":"^6.0.0","webpack-dev-server":"^5.0.4"}}')},8661:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 8 8%27%3e%3cpath fill=%27%23198754%27 d=%27M2.3 6.73.6 4.53c-.4-1.04.46-1.4 1.1-.8l1.1 1.4 3.4-3.8c.6-.63 1.6-.27 1.2.7l-4 4.6c-.43.5-.8.4-1.1.1%27/%3e%3c/svg%3e"},8694:(e,n,t)=>{var s=t(5521);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("2ed2c02b",s,!1,{})},8734:e=>{"use strict";e.exports="data:image/svg+xml,%3csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%27-4 -4 8 8%27%3e%3ccircle r=%273%27 fill=%27rgba%28255, 255, 255, 0.25%29%27/%3e%3c/svg%3e"},9534:(e,n,t)=>{"use strict";var s=t(3751),r=t(641),o=t(953),i=t(33);const a={BASE_URL:"https://api.openai.com",ENDPOINT:"/v1/chat/completions",MODEL:"gpt-4.1",TOKEN:"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"};var l=t(9198);class d{stick;subscriptions=new Array;target=0;total=0;value=0;constructor(){try{this.stick=new l.N5,this.stick.on("shutdown",()=>{console.log("Stick shutdown detected")}),this.stick.on("unhandled",e=>{console.warn("Unhandled event received:",e)})}catch(e){console.log("caught an error",e)}}stickAvailable(){return null!=this.stick}connect(){try{this.stick?.on("startup",()=>{console.log("Stick initialized successfully with sensor of type "+typeof this.sensor+"."),this.sensor?.attach(0,0)}),this.stick?.open().then(e=>(console.log("stick opened",e),()=>{this.stick&&this.stick.close()}))}catch(e){console.error("USB Connection failed",e)}}startAndSubscribe(e,n,t){this.total<this.target&&console.warn("Reset existing measurement that was not completed yet!"),this.reset(e);const s=this.subscribe(e=>{t?(e.percent>100&&this.unsubscribe(s),n({...e,percent:Math.min(e.percent,100)})):n(e)});return s}setTarget(e){this.target=e}subscribe(e){return this.subscriptions.push(e)-1}getValues(){return{target:this.target,total:this.total,value:this.value,percent:this.total/this.target*100}}unsubscribe(e){this.subscriptions.splice(e,1)}updateValue(e,n){this.value=e,this.total=n,this.target>0?this.subscriptions.forEach(e=>e({target:this.target,total:this.total,value:this.value,percent:Math.round(this.total/this.target*1e3)/10})):console.warn("No target set yet, do not notify subscribers!")}reset(e=0){this.total=0,this.value=0,this.target=e}}let u=new Array;var c;!function(e){e.DE="de",e.FR="fr"}(c||(c={}));const p=(0,o.Kh)({power:new class extends d{debug=!1;debugWatt=0;sensor;unit="Wh";lastBeat=0;accumulatedPower=0;constructor(e){super(),e&&(this.debug=e.debug),this.stick&&(this.sensor=new l.zH(this.stick))}reset(e=0){super.reset(e),this.lastBeat=0,this.accumulatedPower=0,this.debugWatt=0}setDebugWatt(e){this.debug?this.debugWatt=e:console.warn("Tried to set watt, but not in debug mode. This is ignored.")}setSettings(e){this.debug=e.debug}fakeData(){this.lastBeat>0&&this.updateValue(this.debugWatt,this.total+this.getWattHours(this.debugWatt)),this.lastBeat=Date.now(),setTimeout(()=>this.fakeData(),1250)}connect(){console.log("connect",this.debug,this.sensor),this.debug?this.fakeData():this.sensor&&(super.connect(),this.sensor.on("powerData",e=>{const n=this.accumulatedPower==e.AccumulatedPower?0:e.Power;this.accumulatedPower=e.AccumulatedPower,this.lastBeat>0&&this.updateValue(n,this.total+this.getWattHours(n)),this.lastBeat=Date.now()}))}getWattHours(e){return(Date.now()-this.lastBeat)/1e3/60/60*e}}({debug:!1}),heartRate:new class extends d{sensor;unit="beats";constructor(){super(),this.stick&&(this.sensor=new l.ds(this.stick),this.sensor.on("heartRateData",e=>{this.updateValue(e.ComputedHeartRate,e.BeatCount)}))}},connected:!1,connectedType:void 0,toasts:new Array,textInput:"",isDebug:!1,chatMessages:new Array,examplePrompts:new Array,lang:c.DE,isPedalling(){const e=this.chatMessages[this.chatMessages.length-1];return!!e&&(e.loading||void 0!==e.percent&&e.percent<100)},connect(e){"debug"===e?(this.isDebug=!0,this.power.setSettings({debug:!0}),this.power.connect(),this.connectedType="power"):(this.isDebug=!1,this[e].connect(),this.connectedType=e),this.connected=!0},resetUser(){this.chatMessages=[],this.examplePrompts=[],this.toasts=[],this.textInput="",this.resetSubscriptions()},startAndSubscribe(e,n,t=!0){if(this.connectedType){const s=this[this.connectedType].startAndSubscribe(e,n,t);return u.push(s),s}return console.warn("No sensor connected yet!"),-1},resetSubscriptions(){if(!this.connectedType)return console.warn("No sensor connected yet!"),-1;for(;u.length>0;)this[this.connectedType].unsubscribe(u.pop())},setTarget(e){this.connectedType?this[this.connectedType].setTarget(e):console.warn("No sensor connected yet!")},addToast(e,n=3e3){this.toasts.push(e),n&&setTimeout(()=>this.removeToast(e),n)},removeToast(e){const n=this.toasts.findIndex(n=>n===e);return n>-1&&(this.toasts.splice(n,1),!0)}}),A="enerki-token";function m(e){return Object.hasOwn(g,e)?g[e][p.lang]:g.NOTFOUND[p.lang]}const g={NOTFOUND:{de:"[nicht √ºbersetzt]",fr:"[non traduit]"},RESET_USER:{de:"Soll enerKI f√ºr eine¬∑n neue¬∑n Benutzer¬∑in zur√ºckgesetzt werden?",fr:"Faut-il r√©initialiser enerKI pour un¬∑e utilisateur¬∑rice ?"},NEW_CARD:{de:"Neue Karte ziehen",fr:"Tirer une nouvelle carte"},SHOW_CARD:{de:"Karte nochmal anzeigen",fr:"Afficher la carte √† nouveau"},RESET:{de:"Zur√ºcksetzen",fr:"R√©initialiser"},LANGUAGE:{de:"Sprache",fr:"Langue"},ERROR:{de:"Leider ist etwas schief gegangen:",fr:"Une erreur s‚Äôest produite :"},OK:{de:"OK",fr:"OK"},SAVE:{de:"Speichern",fr:"Enregistrer"},SEND:{de:"Senden",fr:"Envoyer"},QUIZCARD_TITLE:{de:"Quiz-Karte #",fr:"Carte Quiz #"},QUIZCARD_DESCRIPTION:{de:"Versuche, diese Frage zu beantworten:",fr:"Essaie de r√©pondre √† cette question :"},QUIZCARD_INSTRUCTION:{de:"Dr√ºcke [Enter] um einen Prompt auszuw√§hlen oder einen eigenen Prompt einzugeben.",fr:"Appuie sur [Enter] pour choisir un prompt ou en saisir un personnalis√©."},POWERSIM_LABEL:{de:"Wie stark trittst du in die Pedale?",fr:"√Ä quelle intensit√© p√©dales-tu ?"},POWERSIM_WATT:{de:"Watt",fr:"Watt"},CONNECT_TITLE:{de:"Sensor verbinden",fr:"Connecter le capteur"},CONNECT_NOTCONNECTED:{de:"Es ist noch kein Sensor verbunden.",fr:"Aucun capteur n‚Äôest encore connect√©."},CONNECT_INSTRUCTIONS:{de:"Anleitung zum Einrichten",fr:"Instructions de configuration"},CONNECT_POWERMETER:{de:"Powermeter verbinden",fr:"Connecter le powerm√®tre"},CONNECT_POWERMETER_TOOLTIP:{de:"Powermeter verbinden: Ben√∂tigt einen ANT+ USB-Adapter und kompatible Powermeter-Pedale",fr:"Connecter le powerm√®tre : n√©cessite un adaptateur USB ANT+ et des p√©dales powerm√®tre compatibles"},CONNECT_DEBUG:{de:"Ohne Sensor verwenden",fr:"Utiliser sans capteur"},CONNECT_DEBUG_TOOLTIP:{de:"Ohne Sensor verwenden: Im Debug-Modus wird ein Powermeter simuliert, um enerKI auch ohne Ergometer-Infrastruktur testen zu k√∂nnen.",fr:"Utiliser sans capteur : en mode d√©bogage, un powerm√®tre est simul√© pour tester enerKI sans infrastructure d‚Äôergom√®tre."},AUTH_CONFIRM:{de:"‚ö†Ô∏è Das Token wird unverschl√ºsselt gespeichert. Andere Websiten, die du mit diesem Browser besuchst, k√∂nnen das Token potenziell auslesen.\n\nM√∂chtest du es trotzdem speichern?",fr:"‚ö†Ô∏è Le jeton sera stock√© sans chiffrement. D‚Äôautres sites visit√©s avec ce navigateur pourraient potentiellement le lire.\n\nVeux-tu quand m√™me l‚Äôenregistrer ?"},AUTH_PERSIST:{de:"Das Token auf diesem Computer speichern",fr:"Enregistrer le jeton sur cet ordinateur"},CHAT_PLACEHOLDER:{de:"Gib hier deinen Text ein",fr:"Saisis ton texte ici"},CHAT_PLACEHOLDER_PROMPTS:{de:"Gib hier deinen Text ein oder w√§hle einen der Prompts oben aus",fr:"Saisis ton texte ici ou choisis un des prompts ci-dessus"}},h={action:"#"},f={class:"token-box"},v=["disabled"],b={class:"persist-box"},C=(0,r.pM)({__name:"AuthForm",emits:["onToken","onError"],setup(e,{emit:n}){const t=n,a=(0,o.KR)(""),l=(0,o.KR)(!1);function d(){(function(e){return Promise.resolve(e.length>0)})(a.value).then(e=>{e&&t("onToken",{token:a.value,persist:l.value})})}function u(){if(l.value)l.value=!1;else{const e=window.confirm(m("AUTH_CONFIRM"));window.setTimeout(()=>l.value=e,1)}}return(e,n)=>((0,r.uX)(),(0,r.CE)("form",h,[(0,r.Lk)("div",f,[(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),placeholder:"Bitte gib dein BeeChat Token ein",style:{width:"100%"}},null,512),[[s.Jo,a.value]]),(0,r.Lk)("button",{onClick:d,type:"submit",disabled:0==a.value.length},(0,i.v_)((0,o.R1)(m)("SAVE").toUpperCase()),9,v)]),(0,r.Lk)("div",b,[(0,r.bo)((0,r.Lk)("input",{type:"checkbox","onUpdate:modelValue":n[1]||(n[1]=e=>l.value=e),onClick:u},null,512),[[s.lH,l.value]]),(0,r.eW)((0,i.v_)((0,o.R1)(m)("AUTH_PERSIST")),1)])]))}});t(8694);var E=t(6262);const w=(0,E.A)(C,[["__scopeId","data-v-a149adc6"]]),k={class:"modal fade",id:"connect-modal"},B={class:"modal-dialog"},T={class:"modal-content"},x={class:"modal-header"},y={class:"modal-title"},I={class:"modal-body"},R={href:"https://github.com/bfh-pcdh/enerki/blob/main/SETUP.md",target:"_blank"},M={class:"button-container"},O=["disabled","title"],P=["title"],S=(0,r.pM)({__name:"ConnectModal",emits:["onError"],setup(e,{emit:n}){const t=n;function s(e){try{p.connect(e)}catch(e){t("onError",JSON.stringify(e,null,2))}}return(e,n)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[n[2]||(n[2]=(0,r.Lk)("div",{class:"background"},null,-1)),(0,r.Lk)("div",k,[(0,r.Lk)("div",B,[(0,r.Lk)("div",T,[(0,r.Lk)("div",x,[(0,r.Lk)("h1",y,(0,i.v_)((0,o.R1)(m)("CONNECT_TITLE")),1)]),(0,r.Lk)("div",I,[(0,r.Lk)("p",null,(0,i.v_)((0,o.R1)(m)("CONNECT_NOTCONNECTED")),1),(0,r.Lk)("p",null,[(0,r.Lk)("a",R,(0,i.v_)((0,o.R1)(m)("CONNECT_INSTRUCTIONS")),1)]),(0,r.Lk)("div",M,[(0,r.Q3)(' button \n              @click="connect(\'heartRate\')"\n              :disabled="!store.heartRate.stickAvailable()"\n              class="connect-button">\n              Pulssensor verbinden\n            </button'),(0,r.Lk)("button",{onClick:n[0]||(n[0]=e=>s("power")),class:"connect-button",disabled:!(0,o.R1)(p).power.stickAvailable(),title:(0,o.R1)(m)("CONNECT_POWERMETER_TOOLTIP")},(0,i.v_)((0,o.R1)(m)("CONNECT_POWERMETER")),9,O),(0,r.Lk)("button",{onClick:n[1]||(n[1]=e=>s("debug")),class:"connect-button",title:(0,o.R1)(m)("CONNECT_DEBUG_TOOLTIP")},(0,i.v_)((0,o.R1)(m)("CONNECT_DEBUG")),9,P)])])])])])],64))}});t(9919);const N=(0,E.A)(S,[["__scopeId","data-v-46c3d32b"]]),_=(0,r.pM)({__name:"Settings",emits:["onClose"],setup(e,{emit:n}){const s=t(8330).version,a=n;function l(){confirm("Soll enerKI f√ºr eine¬∑n Benutzer¬∑in zur√ºckgesetz werden?")&&(p.resetUser(),a("onClose"))}return(e,n)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[n[0]||(n[0]=(0,r.Lk)("h1",null,"üèóÔ∏è TO DO: Einstellungen üèóÔ∏è",-1)),(0,r.Lk)("p",null,"enerKI Version: "+(0,i.v_)((0,o.R1)(s)),1),(0,r.Lk)("button",{onClick:l},"Neue¬∑r Benutzer¬∑in")],64))}});t(5172);const W=(0,E.A)(_,[["__scopeId","data-v-5fe2c650"]]);var L;!function(e){e.USER="user",e.AI="assistant",e.DEV="developer"}(L||(L={}));var D,z=t(1083),U=t(400);!function(e){e.PERCENT="%percent%",e.WATTHOUR="%watthours%",e.WATT="%watts",e.KCAL="%calories"}(D||(D={}));const q={de:["Gute Frage! Nun gilt es aktiv zu werden: Tritt in die Pedale, um die Energie f√ºr die KI zu erzeugen!","Los gehts! Tritt in die Pedale und erzeuge die Energie f√ºr deine KI-Anfrage!"],fr:["Bonne question ! Il est temps de passer √† l‚Äôaction : p√©dale pour g√©n√©rer l‚Äô√©nergie n√©cessaire √† l‚ÄôIA !","C‚Äôest parti ! P√©dale pour produire l‚Äô√©nergie de ta requ√™te IA !"]},K={de:["Gute Frage! DEMO-MODUS: Mit dem Regler unten rechts kannst du simulieren, wie stark in die Pedale getreten wird."],fr:["Bonne question ! MODE D√âMO : Avec le curseur en bas √† droite, tu peux simuler la force de p√©dalage."]},G=(D.WATTHOUR,D.WATTHOUR,{de:["Wow! Du hast die Energie schneller erzeugt, als die KI gebraucht hat um die Antwort zu generieren. üí™","Du hast so kr√§ftig in die Pedale getreten - die KI ist noch nicht ganz fertig mit der Antwort. ‚ö°Ô∏è"],fr:["Wow ! Tu as g√©n√©r√© l‚Äô√©nergie plus vite que l‚ÄôIA n‚Äôa mis pour r√©pondre. üí™","Tu as p√©dal√© tellement fort ‚Äì l‚ÄôIA n‚Äôa pas encore fini sa r√©ponse. ‚ö°Ô∏è"]}),X={de:["Gut gestartet! Du hast schon "+D.PERCENT+"% der Energie generiert.","Du hast bereits "+D.PERCENT+"% der Energie erzeugt."],fr:["Bien commenc√© ! Tu as d√©j√† g√©n√©r√© "+D.PERCENT+"% de l‚Äô√©nergie.","Tu as d√©j√† produit "+D.PERCENT+"% de l‚Äô√©nergie."]},F={de:["Du hast bereits "+D.PERCENT+"% der Energie erzeugt.","Du hast schon "+D.PERCENT+"% der ben√∂tigten Leistung erbracht."],fr:["Tu as d√©j√† produit "+D.PERCENT+"% de l‚Äô√©nergie.","Tu as d√©j√† atteint "+D.PERCENT+"% de la puissance n√©cessaire."]},j={de:["Endspurt! Nur noch "+D.PERCENT+"% und du hast es geschafft!","Go Go Go! Du bist schon fast fertig!","Die letzten "+D.PERCENT+"% warten! Das schaffst du!"],fr:["Derni√®re ligne droite ! Plus que "+D.PERCENT+"% et c‚Äôest gagn√© !","Allez, allez ! Tu es presque arriv√© !","Les derniers "+D.PERCENT+"% t‚Äôattendent ! Tu peux le faire !"]},V={de:["Gut die H√§lfte ist geschafft. Bleib dran!","Du hast bereits die H√§lfte hinter dir. Weiter so!"],fr:["Tu as fait la moiti√©. Continue comme √ßa !","La moiti√© est derri√®re toi. Courage !"]},H={de:["Heisst du Tadej Pogaƒçar? Du dr√ºckst grad eindr√ºckliche "+D.WATT+" Watt!","Wow! "+D.WATT+" Watt! Bist du gedopt?","Du sitzt nicht das erste Mal auf dem Velo, oder? "+D.WATT+" Watt sind eindr√ºcklich!"],fr:["Tu t‚Äôappelles Tadej Pogaƒçar ? Tu pousses "+D.WATT+" watts impressionnants !","Wow ! "+D.WATT+" watts ! Tu es dop√© ?","Ce n‚Äôest pas ta premi√®re fois sur un v√©lo, hein ? "+D.WATT+" watts, c‚Äôest √©norme !"]},Q={de:["Bleib dran, du machst das gut!","Weiter so!","Du leistest gerade "+D.WATT+" Watt!"],fr:["Continue, tu t‚Äôen sors bien !","Ne l√¢che rien !","Tu produis actuellement "+D.WATT+" watts !"]},Z={de:["Tritt in die Pedale, um die Energie f√ºr die KI zu erzeugen.","Von alleine passiert nichts. Trete auf dem Home-Trainer, um die Antwort zu sehen.","Los, ich weiss du kannst das!","Lege jetzt los und tritt in die Pedale!"],fr:["P√©dale pour g√©n√©rer l‚Äô√©nergie n√©cessaire √† l‚ÄôIA.","Rien ne se passe tout seul. P√©dale sur le v√©lo pour voir la r√©ponse.","Allez, je sais que tu peux le faire !","C‚Äôest parti, p√©dale maintenant !"]},J={de:["Fertig! Du kannst aufh√∂ren zu treten!","Gratuliere, du hast es geschafft!"],fr:["Termin√© ! Tu peux arr√™ter de p√©daler !","F√©licitations, tu as r√©ussi !"]},Y={de:["Du hast kannst aufh√∂ren zu treten, du hast es geschafft!","Du hast die ben√∂tigte Energie erzeugt und kannst aufh√∂ren zu treten."],fr:["Tu peux arr√™ter de p√©daler, c‚Äôest gagn√© !","Tu as produit l‚Äô√©nergie n√©cessaire, tu peux t‚Äôarr√™ter."]},$={de:["Fertig! Du hast mehr als "+D.KCAL+" kcal verbraucht, um diese Antwort anzuzeigen!","Uff! Das waren gerade √ºber "+D.KCAL+" kcal, die du verbraucht hast!"],fr:["Termin√© ! Tu as d√©pens√© plus de "+D.KCAL+" kcal pour afficher cette r√©ponse !","Ouf ! Tu viens de br√ªler plus de "+D.KCAL+" kcal !"]};let ee=0;function ne(e=!1){const n=Date.now()-2e3>ee;return n&&(ee=Date.now()),n||e}function te(e,n,t=""){const s=Math.floor(Math.random()*e.length);return n?e[s].replace(n,t):e[s]}class se{static highPowerTimeout=!1;static lowPowerTimeout=!1;static notLoadedTimeout=!1;static done=!1;static startToast(){this.done=!1,ne()&&p.addToast(te(p.isDebug?K[p.lang]:q[p.lang]),3e3)}static stillPedalingToast(){ne(!0)&&p.addToast(te(Y[p.lang]),3e3)}static progressToast(e,n,t){if(t>400&&!this.highPowerTimeout)return this.highPowerTimeout=!0,window.setTimeout(()=>this.highPowerTimeout=!1,2e4),ne()&&p.addToast(te(H[p.lang],D.WATT,t.toString()),3e3);if(t<10){if(!this.lowPowerTimeout)return this.lowPowerTimeout=!0,window.setTimeout(()=>this.lowPowerTimeout=!1,1e4),ne()&&p.addToast(te(Z[p.lang]),5e3)}else{if(n)return 100!=e||this.done?e>80?ne()&&p.addToast(te(j[p.lang],D.PERCENT,(100-e).toFixed(1))):e>55?ne()&&p.addToast(te(F[p.lang],D.PERCENT,e.toFixed(1))):e>45?ne()&&p.addToast(te(V[p.lang],D.PERCENT,e.toFixed(1))):ne()&&p.addToast(te(X[p.lang],D.PERCENT,e.toFixed(1))):(this.done=!0,ne()&&p.addToast(te(J[p.lang]),5e3));if(e>=100)return ne()&&p.addToast(te(G[p.lang]),5e3);if(!this.notLoadedTimeout)return this.notLoadedTimeout=!0,window.setTimeout(()=>this.notLoadedTimeout=!1,6e3),ne()&&p.addToast(te(Q[p.lang],D.WATT,t.toString()),3e3)}}static energyToast(e){p.addToast(te($[p.lang],D.KCAL,function(e){return(.8598452279*e/.25).toFixed(1)}(e)),5e3)}}const re=["onClick"],oe={class:"prompt-number"},ie=(0,r.pM)({__name:"PromptExamples",props:{userInputting:Boolean},emits:["onSelectPrompt"],setup(e,{emit:n}){const t=e,s=n;function a(e){const n=p.examplePrompts[e];window.setTimeout(()=>s("onSelectPrompt",n),50)}return document.addEventListener("keydown",function(e){const n=Number(e.key);!t.userInputting&&" "!=e.key&&!isNaN(n)&&n<=p.examplePrompts.length&&a(n-1)}),(e,n)=>((0,r.uX)(),(0,r.CE)("ul",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,o.R1)(p).examplePrompts,(e,n)=>((0,r.uX)(),(0,r.CE)("li",{onClick:e=>a(n)},[(0,r.Lk)("span",oe,(0,i.v_)(n+1),1),(0,r.Lk)("p",null,(0,i.v_)(e),1)],8,re))),256))]))}});t(7853);const ae=(0,E.A)(ie,[["__scopeId","data-v-5fa2f7ae"]]),le={ref:"chat-list",class:"chat-list"},de={key:0,class:"spinner-border",role:"status"},ue=["innerHTML"],ce={action:"#",ref:"input-form"},pe=["placeholder"],Ae=["disabled"],me=(0,r.pM)({__name:"Chat",props:{token:{},percent:{}},emits:["onAnswer","onError"],setup(e,{emit:n}){const t=e,l=(0,U.A)({html:!0,linkify:!0,typographer:!0}),d=n,u=(0,r.rk)("chat-list"),c=(0,o.KR)(0),A=(0,o.KR)(!1),g=(0,o.KR)(null);let h=-1,f=-1;const v=(0,r.EW)(()=>"filter: blur("+(10-Math.round(c.value/10))+"px);opacity:"+(.009*c.value+.1).toFixed(2)+";");function b(){if(""==p.textInput)return;const e={role:L.USER,content:p.textInput,loading:!1};c.value=0,p.chatMessages.push(e);const n={model:a.MODEL,messages:[...p.chatMessages]};p.textInput="";const s={role:L.AI,content:"...",loading:!0,percent:0};se.startToast(),p.chatMessages.push(s),h=-1,u.value.lastElementChild?.scrollIntoView({behavior:"smooth",block:"end"}),p.startAndSubscribe(1,e=>{s.percent=Math.min(e.percent,100),c.value=Math.min(e.percent,100),se.progressToast(s.percent,"..."!==s.content,e.value),e.percent>=100&&h>0&&se.energyToast(h)});const r=Date.now();z.A.post(a.BASE_URL+a.ENDPOINT,n,{headers:{"Content-Type":"application/json",Authorization:"Bearer "+t.token}}).then(e=>{const n=Math.round((Date.now()-r)/1e3);var t;t=e.data.usage.completion_tokens,h=3.5*t/3600,p.setTarget(h),console.log("Energie verbraucht: "+h.toFixed(2)+" Wh in "+n+" Sekunden. \nDas ben√∂tigt eine Durchschnittsleistung von "+Math.round(3600*h/n)+" Watt."),s.content=e.data.choices[0].message.content.replaceAll("√ü","ss"),s.loading=!1,p.chatMessages=[...p.chatMessages],u.value.lastElementChild?.scrollIntoView({behavior:"smooth",block:"end"}),d("onAnswer",s)}).catch(e=>{console.error(e),d("onError",JSON.stringify(e,null,2))})}function C(){A.value=!0,f>0&&window.clearTimeout(f),f=window.setTimeout(()=>{A.value=!1},1e3)}function E(e){p.chatMessages[p.chatMessages.length-1]?.loading||(p.textInput=e,g.value?.focus())}return(e,n)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("ul",le,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,o.R1)(p).chatMessages,(e,t)=>{return(0,r.uX)(),(0,r.CE)("li",{class:(0,i.C4)("message-bubble chat-"+e.role),style:(0,i.Tr)(null!=e.percent&&e.percent<100&&(s=t,p.chatMessages.length-s===1)?v.value:"")},[e.loading?((0,r.uX)(),(0,r.CE)("div",de,n[1]||(n[1]=[(0,r.Lk)("span",{class:"visually-hidden"},"Loading...",-1)]))):((0,r.uX)(),(0,r.CE)("div",{key:1,innerHTML:(0,o.R1)(l).render(e.content)},null,8,ue))],6);var s}),256)),n[2]||(n[2]=(0,r.Lk)("li",{style:{height:"10em",color:"white"}},null,-1))],512),!(0,o.R1)(p).isPedalling()&&(0,o.R1)(p).examplePrompts.length>0?((0,r.uX)(),(0,r.Wv)(ae,{key:0,onOnSelectPrompt:E,"user-inputting":A.value},null,8,["user-inputting"])):(0,r.Q3)("v-if",!0),(0,r.Lk)("form",ce,[(0,r.bo)((0,r.Lk)("input",{autofocus:"",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>(0,o.R1)(p).textInput=e),placeholder:(0,o.R1)(m)((0,o.R1)(p).examplePrompts.length>0?"CHAT_PLACEHOLDER_PROMPTS":"CHAT_PLACEHOLDER"),onInput:C,ref_key:"chatInput",ref:g},null,40,pe),[[s.Jo,(0,o.R1)(p).textInput]]),(0,r.Lk)("button",{onClick:b,type:"submit",disabled:(0,o.R1)(p).isPedalling()},(0,i.v_)((0,o.R1)(m)("SEND").toUpperCase()),9,Ae)],512)],64))}});t(3317);const ge=(0,E.A)(me,[["__scopeId","data-v-82039752"]]),he={class:"watts"},fe=(0,r.pM)({__name:"PowerSimulator",props:{debug:Boolean,watt:Number},setup(e){const n=e,t=(0,o.KR)(0);function a(){const e=(n.debug?t.value:n.watt)||0,s=Math.max(0,Math.min(500,e)),r={r:255,g:255,b:102};let o,i,a;return s<=250?(o={r:182,g:242,b:195},i=r,a=s/250):(o=r,i={r:139,g:0,b:0},a=(s-250)/250),`background-color: rgba(${Math.round(o.r+(i.r-o.r)*a)}, ${Math.round(o.g+(i.g-o.g)*a)}, ${Math.round(o.b+(i.b-o.b)*a)}, 0.5)`}return(0,r.wB)(t,()=>p.power.setDebugWatt(t.value)),(n,l)=>((0,r.uX)(),(0,r.CE)("div",{class:"power",style:(0,i.Tr)(a())},[(0,r.Lk)("h3",null,(0,i.v_)((0,o.R1)(m)("POWERSIM_LABEL")),1),(0,r.Lk)("span",he,(0,i.v_)(e.watt+" "+(0,o.R1)(m)("POWERSIM_WATT")),1),e.debug?(0,r.bo)(((0,r.uX)(),(0,r.CE)("input",{key:0,type:"range","onUpdate:modelValue":l[0]||(l[0]=e=>t.value=e),min:0,max:500},null,512)),[[s.Jo,t.value]]):(0,r.Q3)("v-if",!0)],4))}});t(3756);const ve=(0,E.A)(fe,[["__scopeId","data-v-514c228e"]]),be={class:"modal fade",id:"quizcard-modal"},Ce={class:"modal-dialog"},Ee={class:"modal-content"},we={class:"modal-header"},ke={class:"modal-title"},Be={class:"modal-body"},Te={class:"additional"},xe={class:"question"},ye={class:"additional"},Ie=(0,r.pM)({__name:"QuizCardModal",props:{card:{}},emits:["onClose"],setup(e,{emit:n}){const t=n;return(e,n)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[n[1]||(n[1]=(0,r.Lk)("div",{class:"background"},null,-1)),(0,r.Lk)("div",be,[(0,r.Lk)("div",Ce,[(0,r.Lk)("div",Ee,[(0,r.Lk)("div",we,[(0,r.Lk)("h1",ke,(0,i.v_)((0,o.R1)(m)("QUIZCARD_TITLE")+e.card.id),1),(0,r.Lk)("span",{class:"close-button",onClick:n[0]||(n[0]=e=>t("onClose"))},"√ó")]),(0,r.Lk)("div",Be,[(0,r.Lk)("p",Te,(0,i.v_)((0,o.R1)(m)("QUIZCARD_DESCRIPTION")),1),(0,r.Lk)("p",xe,(0,i.v_)(e.card.question[(0,o.R1)(p).lang]),1),(0,r.Lk)("p",ye,(0,i.v_)((0,o.R1)(m)("QUIZCARD_INSTRUCTION")),1)])])])])],64))}});t(1860);const Re=(0,E.A)(Ie,[["__scopeId","data-v-205e369a"]]),Me=[{id:"1",question:{de:"Wie viel Energie verbraucht ein ChatGPT-Prompt im Durchschnitt?",fr:"Combien d‚Äô√©nergie consomme en moyenne une requ√™te ChatGPT ?"},prompts:{de:["Kurze Antwort: Wie viel Energie verbraucht ein ChatGPT-Prompt im Durchschnitt?","Ausf√ºhrliche Antwort: Wie viel Energie verbraucht ein ChatGPT-Prompt im Durchschnitt?","Verbraucht ein ChatGPT-Prompt so viel Energie wie eine LED-Lampe in einer Sekunde, ein Smartphone in zehn Sekunden oder ein Laptop in einer Minute?"],fr:["R√©ponse courte : Combien d‚Äô√©nergie consomme en moyenne une requ√™te ChatGPT ?","R√©ponse d√©taill√©e : Combien d‚Äô√©nergie consomme en moyenne une requ√™te ChatGPT ?","Une requ√™te ChatGPT consomme-t-elle autant d‚Äô√©nergie qu‚Äôune ampoule LED en une seconde, qu‚Äôun smartphone en dix secondes ou qu‚Äôun ordinateur portable en une minute ?"]}},{id:"2",question:{de:"Wieviel CO‚ÇÇ verursacht eine Google-Suche?",fr:"Combien de CO‚ÇÇ g√©n√®re une recherche Google ?"},prompts:{de:["Wie viel CO‚ÇÇ entsteht bei einer durchschnittlichen Google-Suche?","Was erzeugt mehr CO‚ÇÇ: Eine Frage durch Google zu beantworten, oder mit einem KI-Modell? Erstelle eine Tabelle mit den wichtigsten Einfluss-Faktoren.","Was erzeugt mehr CO‚ÇÇ: Eine Frage durch Google zu beantworten, oder mit einem KI-Modell? Halte die Antwort kurz."],fr:["Combien de CO‚ÇÇ est g√©n√©r√© par une recherche Google moyenne ?","Qu‚Äôest-ce qui g√©n√®re plus de CO‚ÇÇ : r√©pondre √† une question via Google ou via un mod√®le d‚ÄôIA ? Cr√©e un tableau avec les principaux facteurs d‚Äôinfluence.","Qu‚Äôest-ce qui g√©n√®re plus de CO‚ÇÇ : r√©pondre √† une question via Google ou via un mod√®le d‚ÄôIA ? Donne une r√©ponse courte."]}},{id:"3",question:{de:"Wie wirkt sich die steigende Nutzung energieintensiver digitaler Technologien langfristig auf die Gesundheit aus?",fr:"Quel est l‚Äôimpact √† long terme de l‚Äôutilisation croissante des technologies num√©riques √©nergivores sur la sant√© ?"},prompts:{de:["Neben dem √∂kologischen Fussabdruck: Welches Gesundheitsrisiko ist mit exzessiver digitaler Nutzung verbunden?","Neben dem √∂kologischen Fussabdruck: Welches Gesundheitsrisiko ist mit exzessiver digitaler Nutzung verbunden? Mache mir eine ausf√ºhrliche Analyse.","Neben dem √∂kologischen Fussabdruck: Welches Gesundheitsrisiko ist mit exzessiver digitaler Nutzung verbunden? Gib mir eine m√∂glichst kurze Antwort."],fr:["En dehors de l‚Äôempreinte √©cologique : quel risque pour la sant√© est li√© √† une utilisation excessive du num√©rique ?","En dehors de l‚Äôempreinte √©cologique : quel risque pour la sant√© est li√© √† une utilisation excessive du num√©rique ? Fais une analyse d√©taill√©e.","En dehors de l‚Äôempreinte √©cologique : quel risque pour la sant√© est li√© √† une utilisation excessive du num√©rique ? Donne une r√©ponse courte."]}},{id:"4",question:{de:"Um wie viel Grad hat sich die durchschnittliche Erdtemperatur seit der vorindustriellen Zeit erh√∂ht?",fr:"De combien de degr√©s la temp√©rature moyenne de la Terre a-t-elle augment√© depuis l‚Äô√©poque pr√©industrielle ?"},prompts:{de:["Um wie viel Grad hat sich die durchschnittliche Erdtemperatur seit der vorindustriellen Zeit erh√∂ht?","Um wie viel Grad hat sich die durchschnittliche Erdtemperatur seit der vorindustriellen Zeit erh√∂ht? Mache mir eine ausf√ºhrliche Analyse.","Um wie viel Grad hat sich die durchschnittliche Erdtemperatur seit der vorindustriellen Zeit erh√∂ht? Gib mir eine m√∂glichst kurze Antwort."],fr:["De combien de degr√©s la temp√©rature moyenne de la Terre a-t-elle augment√© depuis l‚Äô√©poque pr√©industrielle ?","De combien de degr√©s la temp√©rature moyenne de la Terre a-t-elle augment√© depuis l‚Äô√©poque pr√©industrielle ? Fais une analyse d√©taill√©e.","De combien de degr√©s la temp√©rature moyenne de la Terre a-t-elle augment√© depuis l‚Äô√©poque pr√©industrielle ? Donne une r√©ponse courte."]}},{id:"5",question:{de:"Was ist laut der WHO die gr√∂sste Gesundheitsbedrohung f√ºr die Menschheit im 21. Jahrhundert?",fr:"Selon l‚ÄôOMS, quelle est la plus grande menace pour la sant√© de l‚Äôhumanit√© au XXIe si√®cle ?"},prompts:{de:["Was ist laut der WHO die gr√∂sste Gesundheitsbedrohung f√ºr die Menschheit im 21. Jahrhundert?","Was ist laut der WHO die gr√∂sste Gesundheitsbedrohung f√ºr die Menschheit im 21. Jahrhundert? Mache mir eine ausf√ºhrliche Analyse.","Was ist laut der WHO die gr√∂sste Gesundheitsbedrohung f√ºr die Menschheit im 21. Jahrhundert? Gib mir eine m√∂glichst kurze Antwort."],fr:["Selon l‚ÄôOMS, quelle est la plus grande menace pour la sant√© de l‚Äôhumanit√© au XXIe si√®cle ?","Selon l‚ÄôOMS, quelle est la plus grande menace pour la sant√© de l‚Äôhumanit√© au XXIe si√®cle ? Fais une analyse d√©taill√©e.","Selon l‚ÄôOMS, quelle est la plus grande menace pour la sant√© de l‚Äôhumanit√© au XXIe si√®cle ? Donne une r√©ponse courte."]}},{id:"6",question:{de:"Welche Transportmittel sollen laut WHO in St√§dten priorisiert werden?",fr:"Quels moyens de transport doivent √™tre prioritaires dans les villes selon l‚ÄôOMS ?"},prompts:{de:["Welche Transportmittel sollen laut WHO in St√§dten priorisiert werden?","Welche Transportmittel sollen laut WHO in St√§dten priorisiert werden? Mache mir eine ausf√ºhrliche Analyse.","Welche Transportmittel sollen laut WHO in St√§dten priorisiert werden? Gib mir eine m√∂glichst kurze Antwort."],fr:["Quels moyens de transport doivent √™tre prioritaires dans les villes selon l‚ÄôOMS ?","Quels moyens de transport doivent √™tre prioritaires dans les villes selon l‚ÄôOMS ? Fais une analyse d√©taill√©e.","Quels moyens de transport doivent √™tre prioritaires dans les villes selon l‚ÄôOMS ? Donne une r√©ponse courte."]}},{id:"7",question:{de:"Sch√§tze, wie viel Prozent der Menschen atmen laut WHO-Daten ungesunde Aussenluft ein, die gr√∂sstenteils durch die Verbrennung fossiler Brennstoffe verursacht wird?",fr:"Estimez quel pourcentage de personnes respirent un air ext√©rieur malsain, principalement caus√© par la combustion de combustibles fossiles, selon les donn√©es de l‚ÄôOMS ?"},prompts:{de:["Wie viel Prozent der Menschen atmen laut WHO-Daten ungesunde Aussenluft ein, die gr√∂sstenteils durch die Verbrennung fossiler Brennstoffe verursacht wird?","Wie viel Prozent der Menschen atmen laut WHO-Daten ungesunde Aussenluft ein, die gr√∂sstenteils durch die Verbrennung fossiler Brennstoffe verursacht wird? Mache mir eine ausf√ºhrliche Analyse.","Wie viel Prozent der Menschen atmen laut WHO-Daten ungesunde Aussenluft ein, die gr√∂sstenteils durch die Verbrennung fossiler Brennstoffe verursacht wird? Gib mir eine m√∂glichst kurze Antwort."],fr:["Quel pourcentage de personnes respirent un air ext√©rieur malsain, principalement caus√© par la combustion de combustibles fossiles, selon les donn√©es de l‚ÄôOMS ?","Quel pourcentage de personnes respirent un air ext√©rieur malsain, principalement caus√© par la combustion de combustibles fossiles, selon les donn√©es de l‚ÄôOMS ? Fais une analyse d√©taill√©e.","Quel pourcentage de personnes respirent un air ext√©rieur malsain, principalement caus√© par la combustion de combustibles fossiles, selon les donn√©es de l‚ÄôOMS ? Donne une r√©ponse courte."]}}];class Oe{static lastQuizCard=-1;constructor(){}static drawRandomQuizCard(){let e=Math.floor(Math.random()*Me.length);for(;e==this.lastQuizCard;)e=Math.floor(Math.random()*Me.length);return this.lastQuizCard=e,Me[e]}}const Pe=["src","title"],Se={class:"header-buttons"},Ne=["onClick","title"],_e={key:1},We={key:1},Le={key:0,class:"error"},De={class:"toast-list"},ze={class:"alert alert-info",role:"alert"},Ue=(0,r.pM)({__name:"App",setup(e){const n=t(8330).version,s=(0,o.KR)(function(e){const n=window.localStorage.getItem(e);if(null!==n)try{return JSON.parse(n)}catch(e){return n}}(A)||a.TOKEN),l=(0,o.KR)(),d=(0,o.KR)(0),u=(0,o.KR)(),g=(0,o.KR)(!1),h=(0,o.KR)(!1);function f(e){var n,t;s.value=e.token,e.persist&&(n=A,t=s.value,window.localStorage.setItem(n,"string"==typeof t?t:JSON.stringify(t)))}function v(){switch(p.lang){case c.DE:p.lang=c.FR;break;case c.FR:p.lang=c.DE}}function b(){confirm(m("RESET_USER"))&&(u.value=void 0,p.resetUser())}function C(){b(),l.value=void 0,s.value=a.TOKEN}function E(){null==u.value&&(u.value=Oe.drawRandomQuizCard(),p.examplePrompts=u.value.prompts[p.lang]),g.value=!0}function k(e="Unbekannter Fehler."){l.value=e}return document.addEventListener("keydown",function(e){g.value&&"Enter"==e.key?g.value=!1:"Enter"==e.key&&""==p.textInput&&E()}),(e,A)=>((0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("header",null,[(0,r.Lk)("img",{src:t(7968),alt:"Logo Berner Fachhochschule",class:"logo",title:"EnerKI Version: "+(0,o.R1)(n)+"\nModel: "+(0,o.R1)(a).BASE_URL+" > "+(0,o.R1)(a).MODEL},null,8,Pe),A[2]||(A[2]=(0,r.Lk)("h1",null,"enerKI",-1)),(0,r.Lk)("div",Se,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)([{icon:"üÄô",title:null==u.value?m("NEW_CARD"):m("SHOW_CARD"),action:E,style:null==u.value?"line-height: 1.8em;":"text-shadow: #fac300 0px 0 3px; line-height: 1.8em;"},{icon:"‚ü≤",title:m("RESET"),action:b,style:""},{icon:p.lang===c.DE?"üá©üá™":"üá´üá∑",title:m("LANGUAGE"),action:v,style:"filter: saturate(0)"}],e=>((0,r.uX)(),(0,r.CE)("a",{onClick:e.action,title:e.title,class:"header-button",style:(0,i.Tr)(e.style)},(0,i.v_)(e.icon),13,Ne))),256))])]),h.value?((0,r.uX)(),(0,r.Wv)(W,{key:0,onOnClose:A[0]||(A[0]=e=>h.value=!1)})):((0,r.uX)(),(0,r.CE)("div",_e,[(0,r.Q3)(" if no token is set, we show the auth form "),0==s.value?.length?((0,r.uX)(),(0,r.Wv)(w,{key:0,onOnToken:f,onOnError:k})):((0,r.uX)(),(0,r.CE)("main",We,[(0,r.Q3)(" display error message "),l.value?((0,r.uX)(),(0,r.CE)("div",Le,[(0,r.Lk)("h2",null,(0,i.v_)((0,o.R1)(m)("ERROR")),1),(0,r.eW)(" "+(0,i.v_)(l.value)+" ",1),(0,r.Lk)("button",{onClick:C},(0,i.v_)((0,o.R1)(m)("ERROR")),1)])):((0,r.uX)(),(0,r.CE)(r.FK,{key:1},[(0,r.Q3)(" chat window "),(0,r.bF)(ge,{token:s.value,percent:d.value,onOnError:k},null,8,["token","percent"])],2112)),(0,r.Q3)(" window for power simulation / debug "),(0,o.R1)(p).connected&&(0,o.R1)(p).isPedalling()?((0,r.uX)(),(0,r.Wv)(ve,{key:2,debug:(0,o.R1)(p).isDebug,watt:Math.round((0,o.R1)(p).power.getValues().value)},null,8,["debug","watt"])):(0,r.Q3)("v-if",!0)])),(0,o.R1)(p).connected?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.Wv)(N,{key:2,onOnError:k})),u.value&&g.value?((0,r.uX)(),(0,r.Wv)(Re,{key:3,card:u.value,onOnClose:A[1]||(A[1]=e=>g.value=!1)},null,8,["card"])):(0,r.Q3)("v-if",!0),(0,r.Lk)("ul",De,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)((0,o.R1)(p).toasts,(e,n)=>((0,r.uX)(),(0,r.CE)("li",{style:(0,i.Tr)("opacity: "+(n+1)/(0,o.R1)(p).toasts.length)},[(0,r.Lk)("div",ze,(0,i.v_)(e),1)],4))),256))])]))],64))}});t(9776);const qe=(0,E.A)(Ue,[["__scopeId","data-v-3f22f2c9"]]);t(6902),(0,s.Ef)(qe).mount("#app")},9776:(e,n,t)=>{var s=t(7655);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("f352994a",s,!1,{})},9843:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var s=t(1354),r=t.n(s),o=t(6314),i=t.n(o)()(r());i.push([e.id,"\n.power[data-v-514c228e] {\n    position: absolute;\n    right: 2em;\n    bottom: 5em;\n    width: 12em;\n    border-radius: 0.5em;\n}\n.watts[data-v-514c228e] {\n    width: 100%;\n    text-align: center;\n    display: block;\n    font-size: 1.5em;\n    font-weight: 700;\n    padding: 0.2em;\n}\ninput[data-v-514c228e] {\n    width: 90%;\n    margin: 5%;\n}\nh3[data-v-514c228e] {\n    width: 100%;\n    font-size: 0.7em;\n    text-align: center;\n    margin-top: 0.5em;\n}\n","",{version:3,sources:["webpack://./src/components/PowerSimulator.vue"],names:[],mappings:";AA2DE;IACE,kBAAkB;IAClB,UAAU;IACV,WAAW;IACX,WAAW;IACX,oBAAoB;AACtB;AACA;IACE,WAAW;IACX,kBAAkB;IAClB,cAAc;IACd,gBAAgB;IAChB,gBAAgB;IAChB,cAAc;AAChB;AACA;IACE,UAAU;IACV,UAAU;AACZ;AACA;IACE,WAAW;IACX,gBAAgB;IAChB,kBAAkB;IAClB,iBAAiB;AACnB",sourcesContent:['<script setup lang="ts">\n  import { store } from \'@/store\';\n  import { ref, watch } from \'vue\';\n  import { i18n } from \'@/assets/i18n\';\n\n  const MIN_WATT = 0;\n  const MAX_WATT = 500;\n\n  const props = defineProps({\n    debug: Boolean,\n    watt: Number\n  });\n\n  const simulatedWatt = ref(MIN_WATT);\n\n  watch(simulatedWatt, () => \n    store.power.setDebugWatt(simulatedWatt.value)\n  );\n\n  function getBackgroundColor(): string {\n    const calcWatt = (props.debug ? simulatedWatt.value : props.watt) || 0;\n    const clamped = Math.max(0, Math.min(MAX_WATT,calcWatt));\n\n    const green = { r: 182, g: 242, b: 195 }; \n    const yellow = { r: 255, g: 255, b: 102 }; \n    const red = { r: 139, g: 0, b: 0 };       \n\n    let start, end, t;\n\n    if (clamped <= MAX_WATT / 2) {\n      start = green;\n      end = yellow;\n      t = clamped / (MAX_WATT / 2);\n    } else {\n      start = yellow;\n      end = red;\n      t = (clamped - (MAX_WATT / 2)) / (MAX_WATT / 2);\n    }\n\n    return `background-color: rgba(${\n      Math.round(start.r + (end.r - start.r) * t)\n    }, ${\n      Math.round(start.g + (end.g - start.g) * t)\n    }, ${\n      Math.round(start.b + (end.b - start.b) * t)\n    }, 0.5)`;\n  }\n\n<\/script>\n\n<template>\n  <div class="power" :style="getBackgroundColor()">\n    <h3>{{ i18n(\'POWERSIM_LABEL\') }}</h3>\n    <span class="watts">{{ watt + \' \' + i18n(\'POWERSIM_WATT\') }}</span>\n    <input type="range" v-if="debug "v-model="simulatedWatt" :min="MIN_WATT" :max="MAX_WATT"></input>\n  </div>\n</template>\n\n<style scoped>\n  .power {\n    position: absolute;\n    right: 2em;\n    bottom: 5em;\n    width: 12em;\n    border-radius: 0.5em;\n  }\n  .watts {\n    width: 100%;\n    text-align: center;\n    display: block;\n    font-size: 1.5em;\n    font-weight: 700;\n    padding: 0.2em;\n  }\n  input {\n    width: 90%;\n    margin: 5%;\n  }\n  h3 {\n    width: 100%;\n    font-size: 0.7em;\n    text-align: center;\n    margin-top: 0.5em;\n  }\n</style>\n'],sourceRoot:""}]);const a=i},9886:()=>{},9919:(e,n,t)=>{var s=t(4568);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,t(534).A)("a632c19a",s,!1,{})}},t={};function s(e){var r=t[e];if(void 0!==r)return r.exports;var o=t[e]={id:e,exports:{}};return n[e](o,o.exports,s),o.exports}s.m=n,e=[],s.O=(n,t,r,o)=>{if(!t){var i=1/0;for(u=0;u<e.length;u++){for(var[t,r,o]=e[u],a=!0,l=0;l<t.length;l++)(!1&o||i>=o)&&Object.keys(s.O).every(e=>s.O[e](t[l]))?t.splice(l--,1):(a=!1,o<i&&(i=o));if(a){e.splice(u--,1);var d=r();void 0!==d&&(n=d)}}return n}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[t,r,o]},s.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return s.d(n,{a:n}),n},s.d=(e,n)=>{for(var t in n)s.o(n,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.p="/enerki/",(()=>{s.b=document.baseURI||self.location.href;var e={792:0};s.O.j=n=>0===e[n];var n=(n,t)=>{var r,o,[i,a,l]=t,d=0;if(i.some(n=>0!==e[n])){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(l)var u=l(s)}for(n&&n(t);d<i.length;d++)o=i[d],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(u)},t=self.webpackChunkenerki=self.webpackChunkenerki||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var r=s.O(void 0,[287],()=>s(9534));r=s.O(r)})();
//# sourceMappingURL=main.chunk.js.map